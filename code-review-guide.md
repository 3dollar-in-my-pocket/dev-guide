# 코드 리뷰 가이드

## 1. 어떤 관점에서 코드 리뷰를 해야할까?
- Coding Style Guide를 잘 지켰는가?
    - CI/CD로 Lint를 적용하기 전까지는... 일단 리뷰에서 진행하는 것으로..😭
- 프로젝트에서 사용하는 아키텍처를 잘 유지하고 있는가?
- 코드를 읽다가 잘 이해가 안가는 부분이 있으면 어떤 의도를 가지고 작성했는지 질문하기
- 본인의 기술적인 지식 혹은 노하우를 공유하기


## 2. 코드리뷰 Pn 규칙 (from. 뱅크샐러드)
코드 리뷰어와 리뷰이 사이의 비동기 커뮤니케이션으로 코드리뷰가 진행되는데, 최소한의 시간으로 최대한의 효율을 내고 리뷰어가 코멘트마다 임팩트를 주고싶은 정도를 주기 위해 Pn 규칙을 정의합니다.   
해당 키워드는 **Priority**의 줄임말입니다. 현재 상황에서 필요하다고 생각되는 3단계로 정의를 하였고 사용하면서 추가적인 단계가 필요하다고 생각되면 단계를 추가하여 사용하겠습니다.  

해당 규칙에 포함되지 않는 코멘트는 태그 없이 그대로 작성하면 됩니다.
(ex. 코드에 대한 질문: 해당 함수를 호출했을 때, 예외처리가 필요한 케이스는 없나요?)

### 1️⃣ `P1`: 반드시 반영해주세요

해당 코드가 서비스에 크리티컬한(크래시 및 버그 유발)영향을 미친다고 판단되는 경우, 반드시 수정해달라는 의미로 P1 태그를 붙일 수 있습니다. 리뷰 요청자는 해당 태그를 확인 한 뒤, 수정을 진행하거나 이번에 반영할 수 없다는 합당한 근거를 통해 리뷰어를 설득할 수 있습니다.

### 2️⃣  `P2`: 적극적으로 고려해주세요

해당 코드가 서비스가 멈추는 크리티컬한 영향을 미치진 않지만, 더 좋은 코드 퀄리티를 위해 제안할 수 있습니다. 리뷰 요청자는 해당 태그에 대하여 수정을 진행하거나 합당한 근거를 통해 리뷰어를 설득할 수 있습니다. 

### 3️⃣  `P3`: 반영해도 좋고 무시해도 좋습니다

P2와 마찬가지로 서비스에 크리티컬한 영향을 주진 않고 소소한 코드에 대한 의견을 붙일 때 사용합니다. 반영 여뷰는 리뷰 요청자가 스스로 판단하여 넘어갑니다. 해당 코멘트에 댓글을 의무적으로 작성할 필요는 없습니다.

### 사용방법

- 코멘트 앞에 P1, P2, P3 태그를 달아주세요. 리뷰 요청자와 리뷰어의 눈에 잘 띄도록 코드블럭 포맷을 사용하여 태그를 달아주세요 (깃랩에서 코드블록은 \` 을 사용해 생성할 수 있습니다.)

### 사용예시


## 3. Comment는 resolve 시키지 않기
코드리뷰를 진행하면서 만든 코멘트들을 리뷰 요청자가 반영을 하고 반영을 확인하더라도 리뷰어가 코멘트를 **resolve시키지 않습니다.**  

resolve를 시킨다면 코드의 히스토리를 볼 때 불편함이 존재합니다.
코드의 히스토리를 보기 위해 주로 **티켓 검색** → **연결된 MR 확인**을 통해 들어올텐데, MR에 있는 코드 리뷰를 확인하기 위해서는 resolve된 리뷰를 모두 펼쳐서 봐야하는 불편함이 있습니다. 

이런 불편함을 줄이기 위하여 코드리뷰를 진행하며 생성된 코멘트들은 해결이 되었다고 하더라도 모두 resolve시키지 않습니다. 코멘트를 resolve 시키지 않더라도 Approve만 된다면 머지가 가능합니다.


## 4. Comment를 봤다면 이모지 달기
바로 위에서 Comment를 resolve 시키지 않는다고 했는데, 그러면 코드리뷰에 대한 수정을 진행하고 나서 resolve시키지 않고 수정된 코드를 봤다는 표시를 어떻게 남길까요?  

이런 단점을 보완하고 Pn 규칙과 마찬가지로 리뷰 요청자와 리뷰어 사이의 비동기 커뮤니케이션을 최대한 효율적으로 하기 위해 이모지를 적극적으로 활용하고자 합니다.  

- 리뷰 요청자와 리뷰어 모두 상대방이 남긴 코멘트를 확인했다면 ✔️ 이모지를 달아서 확인했다는 리액션을 남겨주세요!
- 리뷰어가 남긴 코멘트 내용을 코드에 모두 반영했다면 리뷰 요청자는 수정했다는 코멘트를 달아주세요. 리뷰어가 변경된 코드를 확인했다면 마찬가지로 ✔️ 이모지를 달아주세요!
- ✔️ 이모지가 가장 직관적이여서 기본 이모지로 사용하고 이외에 다른 리액션은 자유롭게 사용해주세요!


## Reference
- [코드 리뷰 in 뱅크샐러드 개발 문화](https://blog.banksalad.com/tech/banksalad-code-review-culture/)
- [코드리뷰 - 같이 성장하기 위한, 그리고 성공하기 위한 팀이 되기 위한 도구(김우성) - AsyncSwift Seminar002](https://youtu.be/orUglG75oSE)
